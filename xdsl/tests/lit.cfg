import lit.formats
import os
from pathlib import Path

config.name = "mqtcore"
config.test_format = lit.formats.ShTest()
config.suffixes = ['.mlir', '.py']

# Get the path to mqtcore-opt tool and Python from venv
tools_dir = Path(__file__).parent.parent / "tools"
python_path = "/Users/patrickhopf/Code/mqt/mqt-core/.venv/bin/python"
mqtcore_opt = f"{python_path} {str(tools_dir / 'mqtcore-opt')}"

config.substitutions.append(('MQTOPT_ROUNDTRIP', f"{mqtcore_opt} %s --print-op-generic --split-input-file | {mqtcore_opt} --split-input-file | filecheck %s"))
config.substitutions.append(("MQTOPT_GENERIC_ROUNDTRIP", f"{mqtcore_opt} %s --print-op-generic --split-input-file | filecheck %s --check-prefix=CHECK-GENERIC"))
