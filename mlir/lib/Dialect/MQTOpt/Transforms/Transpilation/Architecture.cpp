/*
 * Copyright (c) 2023 - 2025 Chair for Design Automation, TUM
 * Copyright (c) 2025 Munich Quantum Software Company GmbH
 * All rights reserved.
 *
 * SPDX-License-Identifier: MIT
 *
 * Licensed under the MIT License
 */

#include "mlir/Dialect/MQTOpt/Transforms/Transpilation/Architecture.h"

#include "mlir/Dialect/MQTOpt/Transforms/Transpilation/Common.h"

#include <cstddef>
#include <cstdint>
#include <llvm/ADT/SmallVector.h>
#include <llvm/ADT/StringRef.h>
#include <memory>
#include <stdexcept>
#include <string>

namespace mqt::ir::opt {
[[nodiscard]] llvm::SmallVector<std::size_t>
Architecture::shortestPathBetween(QubitIndex u, QubitIndex v) const {
  llvm::SmallVector<std::size_t> path;

  if (prev_[u][v] == UINT64_MAX) {
    throw std::domain_error("No path between qubits " + std::to_string(u) +
                            " and " + std::to_string(v));
  }

  path.push_back(v);
  while (u != v) {
    v = prev_[u][v];
    path.push_back(v);
  }

  return path;
}

[[nodiscard]] std::size_t Architecture::distanceBetween(QubitIndex u,
                                                        QubitIndex v) const {
  if (dist_[u][v] == UINT64_MAX) {
    throw std::domain_error("No path between qubits " + std::to_string(u) +
                            " and " + std::to_string(v));
  }
  return dist_[u][v];
}

void Architecture::floydWarshallWithPathReconstruction() {
  for (const auto& [u, v] : couplingSet_) {
    dist_[u][v] = 1;
    prev_[u][v] = u;
  }
  for (std::size_t v = 0; v < nqubits(); ++v) {
    dist_[v][v] = 0;
    prev_[v][v] = v;
  }

  for (std::size_t k = 0; k < nqubits(); ++k) {
    for (std::size_t i = 0; i < nqubits(); ++i) {
      for (std::size_t j = 0; j < nqubits(); ++j) {
        if (dist_[i][k] == UINT64_MAX || dist_[k][j] == UINT64_MAX) {
          continue; // avoid overflow with "infinite" distances
        }
        const std::size_t sum = dist_[i][k] + dist_[k][j];
        if (dist_[i][j] > sum) {
          dist_[i][j] = sum;
          prev_[i][j] = prev_[k][j];
        }
      }
    }
  }
}

void Architecture::collectNeighbours() {
  for (const auto& [u, v] : couplingSet_) {
    neighbours_[u].push_back(v);
  }
}

[[nodiscard]] llvm::SmallVector<QubitIndex, 4>
Architecture::neighboursOf(QubitIndex u) const {
  return neighbours_[u];
}

std::unique_ptr<Architecture> getArchitecture(const llvm::StringRef name) {
  if (name == "MQTTest") {
    static const Architecture::CouplingSet COUPLING{
        {0, 1}, {1, 0}, {0, 2}, {2, 0}, {1, 3}, {3, 1}, {2, 3},
        {3, 2}, {2, 4}, {4, 2}, {3, 5}, {5, 3}, {4, 5}, {5, 4}};

    return std::make_unique<Architecture>("MQT-Test", 6, COUPLING);
  }

  if (name == "IBMFalcon") {
    static const Architecture::CouplingSet COUPLING{
        {0, 1},     {0, 14},    {1, 0},     {1, 2},     {2, 1},     {2, 3},
        {3, 2},     {3, 4},     {4, 3},     {4, 5},     {4, 15},    {5, 4},
        {5, 6},     {6, 5},     {6, 7},     {7, 6},     {7, 8},     {8, 7},
        {8, 16},    {9, 10},    {10, 9},    {10, 11},   {11, 10},   {11, 12},
        {12, 11},   {12, 13},   {12, 17},   {13, 12},   {14, 0},    {14, 18},
        {15, 4},    {15, 22},   {16, 8},    {16, 26},   {17, 12},   {17, 30},
        {18, 14},   {18, 19},   {19, 18},   {19, 20},   {20, 19},   {20, 21},
        {20, 33},   {21, 20},   {21, 22},   {22, 15},   {22, 21},   {22, 23},
        {23, 22},   {23, 24},   {24, 23},   {24, 25},   {24, 34},   {25, 24},
        {25, 26},   {26, 16},   {26, 25},   {26, 27},   {27, 26},   {27, 28},
        {28, 27},   {28, 29},   {28, 35},   {29, 28},   {29, 30},   {30, 17},
        {30, 29},   {30, 31},   {31, 30},   {31, 32},   {32, 31},   {32, 36},
        {33, 20},   {33, 39},   {34, 24},   {34, 43},   {35, 28},   {35, 47},
        {36, 32},   {36, 51},   {37, 38},   {37, 52},   {38, 37},   {38, 39},
        {39, 33},   {39, 38},   {39, 40},   {40, 39},   {40, 41},   {41, 40},
        {41, 42},   {41, 53},   {42, 41},   {42, 43},   {43, 34},   {43, 42},
        {43, 44},   {44, 43},   {44, 45},   {45, 44},   {45, 46},   {45, 54},
        {46, 45},   {46, 47},   {47, 35},   {47, 46},   {47, 48},   {48, 47},
        {48, 49},   {49, 48},   {49, 50},   {49, 55},   {50, 49},   {50, 51},
        {51, 36},   {51, 50},   {52, 37},   {52, 56},   {53, 41},   {53, 60},
        {54, 45},   {54, 64},   {55, 49},   {55, 68},   {56, 52},   {56, 57},
        {57, 56},   {57, 58},   {58, 57},   {58, 59},   {58, 71},   {59, 58},
        {59, 60},   {60, 53},   {60, 59},   {60, 61},   {61, 60},   {61, 62},
        {62, 61},   {62, 63},   {62, 72},   {63, 62},   {63, 64},   {64, 54},
        {64, 63},   {64, 65},   {65, 64},   {65, 66},   {66, 65},   {66, 67},
        {66, 73},   {67, 66},   {67, 68},   {68, 55},   {68, 67},   {68, 69},
        {69, 68},   {69, 70},   {70, 69},   {70, 74},   {71, 58},   {71, 77},
        {72, 62},   {72, 81},   {73, 66},   {73, 85},   {74, 70},   {74, 89},
        {75, 76},   {75, 90},   {76, 75},   {76, 77},   {77, 71},   {77, 76},
        {77, 78},   {78, 77},   {78, 79},   {79, 78},   {79, 80},   {79, 91},
        {80, 79},   {80, 81},   {81, 72},   {81, 80},   {81, 82},   {82, 81},
        {82, 83},   {83, 82},   {83, 84},   {83, 92},   {84, 83},   {84, 85},
        {85, 73},   {85, 84},   {85, 86},   {86, 85},   {86, 87},   {87, 86},
        {87, 88},   {87, 93},   {88, 87},   {88, 89},   {89, 74},   {89, 88},
        {90, 75},   {90, 94},   {91, 79},   {91, 98},   {92, 83},   {92, 102},
        {93, 87},   {93, 106},  {94, 90},   {94, 95},   {95, 94},   {95, 96},
        {96, 95},   {96, 97},   {96, 109},  {97, 96},   {97, 98},   {98, 91},
        {98, 97},   {98, 99},   {99, 98},   {99, 100},  {100, 99},  {100, 101},
        {100, 110}, {101, 100}, {101, 102}, {102, 92},  {102, 101}, {102, 103},
        {103, 102}, {103, 104}, {104, 103}, {104, 105}, {104, 111}, {105, 104},
        {105, 106}, {106, 93},  {106, 105}, {106, 107}, {107, 106}, {107, 108},
        {108, 107}, {108, 112}, {109, 96},  {110, 100}, {110, 118}, {111, 104},
        {111, 122}, {112, 108}, {112, 126}, {113, 114}, {114, 113}, {114, 115},
        {115, 114}, {115, 116}, {116, 115}, {116, 117}, {117, 116}, {117, 118},
        {118, 110}, {118, 117}, {118, 119}, {119, 118}, {119, 120}, {120, 119},
        {120, 121}, {121, 120}, {121, 122}, {122, 111}, {122, 121}, {122, 123},
        {123, 122}, {123, 124}, {124, 123}, {124, 125}, {125, 124}, {125, 126},
        {126, 112}, {126, 125}};

    return std::make_unique<Architecture>("IBM-Falcon", 127, COUPLING);
  }

  if (name == "MQTGrid4") {
    static const Architecture::CouplingSet COUPLING{
        {0, 4},   {4, 0},   {0, 1},   {1, 0},   {1, 5},   {5, 1},   {1, 2},
        {2, 1},   {2, 6},   {6, 2},   {2, 3},   {3, 2},   {3, 7},   {7, 3},
        {4, 8},   {8, 4},   {4, 5},   {5, 4},   {5, 9},   {9, 5},   {5, 6},
        {6, 5},   {6, 10},  {10, 6},  {6, 7},   {7, 6},   {7, 11},  {11, 7},
        {8, 12},  {12, 8},  {8, 9},   {9, 8},   {9, 13},  {13, 9},  {9, 10},
        {10, 9},  {10, 14}, {14, 10}, {10, 11}, {11, 10}, {11, 15}, {15, 11},
        {12, 13}, {13, 12}, {13, 14}, {14, 13}, {14, 15}, {15, 14}};

    return std::make_unique<Architecture>("MQTGrid4", 16, COUPLING);
  }

  if (name == "MQTGrid8") {
    static const Architecture::CouplingSet COUPLING{
        {0, 8},   {8, 0},   {0, 1},   {1, 0},   {1, 9},   {9, 1},   {1, 2},
        {2, 1},   {2, 10},  {10, 2},  {2, 3},   {3, 2},   {3, 11},  {11, 3},
        {3, 4},   {4, 3},   {4, 12},  {12, 4},  {4, 5},   {5, 4},   {5, 13},
        {13, 5},  {5, 6},   {6, 5},   {6, 14},  {14, 6},  {6, 7},   {7, 6},
        {7, 15},  {15, 7},  {8, 16},  {16, 8},  {8, 9},   {9, 8},   {9, 17},
        {17, 9},  {9, 10},  {10, 9},  {10, 18}, {18, 10}, {10, 11}, {11, 10},
        {11, 19}, {19, 11}, {11, 12}, {12, 11}, {12, 20}, {20, 12}, {12, 13},
        {13, 12}, {13, 21}, {21, 13}, {13, 14}, {14, 13}, {14, 22}, {22, 14},
        {14, 15}, {15, 14}, {15, 23}, {23, 15}, {16, 24}, {24, 16}, {16, 17},
        {17, 16}, {17, 25}, {25, 17}, {17, 18}, {18, 17}, {18, 26}, {26, 18},
        {18, 19}, {19, 18}, {19, 27}, {27, 19}, {19, 20}, {20, 19}, {20, 28},
        {28, 20}, {20, 21}, {21, 20}, {21, 29}, {29, 21}, {21, 22}, {22, 21},
        {22, 30}, {30, 22}, {22, 23}, {23, 22}, {23, 31}, {31, 23}, {24, 32},
        {32, 24}, {24, 25}, {25, 24}, {25, 33}, {33, 25}, {25, 26}, {26, 25},
        {26, 34}, {34, 26}, {26, 27}, {27, 26}, {27, 35}, {35, 27}, {27, 28},
        {28, 27}, {28, 36}, {36, 28}, {28, 29}, {29, 28}, {29, 37}, {37, 29},
        {29, 30}, {30, 29}, {30, 38}, {38, 30}, {30, 31}, {31, 30}, {31, 39},
        {39, 31}, {32, 40}, {40, 32}, {32, 33}, {33, 32}, {33, 41}, {41, 33},
        {33, 34}, {34, 33}, {34, 42}, {42, 34}, {34, 35}, {35, 34}, {35, 43},
        {43, 35}, {35, 36}, {36, 35}, {36, 44}, {44, 36}, {36, 37}, {37, 36},
        {37, 45}, {45, 37}, {37, 38}, {38, 37}, {38, 46}, {46, 38}, {38, 39},
        {39, 38}, {39, 47}, {47, 39}, {40, 48}, {48, 40}, {40, 41}, {41, 40},
        {41, 49}, {49, 41}, {41, 42}, {42, 41}, {42, 50}, {50, 42}, {42, 43},
        {43, 42}, {43, 51}, {51, 43}, {43, 44}, {44, 43}, {44, 52}, {52, 44},
        {44, 45}, {45, 44}, {45, 53}, {53, 45}, {45, 46}, {46, 45}, {46, 54},
        {54, 46}, {46, 47}, {47, 46}, {47, 55}, {55, 47}, {48, 56}, {56, 48},
        {48, 49}, {49, 48}, {49, 57}, {57, 49}, {49, 50}, {50, 49}, {50, 58},
        {58, 50}, {50, 51}, {51, 50}, {51, 59}, {59, 51}, {51, 52}, {52, 51},
        {52, 60}, {60, 52}, {52, 53}, {53, 52}, {53, 61}, {61, 53}, {53, 54},
        {54, 53}, {54, 62}, {62, 54}, {54, 55}, {55, 54}, {55, 63}, {63, 55},
        {56, 57}, {57, 56}, {57, 58}, {58, 57}, {58, 59}, {59, 58}, {59, 60},
        {60, 59}, {60, 61}, {61, 60}, {61, 62}, {62, 61}, {62, 63}, {63, 62}};

    return std::make_unique<Architecture>("MQTGrid8", 64, COUPLING);
  }

  if (name == "MQTGrid16") {
    static const Architecture::CouplingSet COUPLING{
        {0, 16},    {16, 0},    {0, 1},     {1, 0},     {1, 17},    {17, 1},
        {1, 2},     {2, 1},     {2, 18},    {18, 2},    {2, 3},     {3, 2},
        {3, 19},    {19, 3},    {3, 4},     {4, 3},     {4, 20},    {20, 4},
        {4, 5},     {5, 4},     {5, 21},    {21, 5},    {5, 6},     {6, 5},
        {6, 22},    {22, 6},    {6, 7},     {7, 6},     {7, 23},    {23, 7},
        {7, 8},     {8, 7},     {8, 24},    {24, 8},    {8, 9},     {9, 8},
        {9, 25},    {25, 9},    {9, 10},    {10, 9},    {10, 26},   {26, 10},
        {10, 11},   {11, 10},   {11, 27},   {27, 11},   {11, 12},   {12, 11},
        {12, 28},   {28, 12},   {12, 13},   {13, 12},   {13, 29},   {29, 13},
        {13, 14},   {14, 13},   {14, 30},   {30, 14},   {14, 15},   {15, 14},
        {15, 31},   {31, 15},   {16, 32},   {32, 16},   {16, 17},   {17, 16},
        {17, 33},   {33, 17},   {17, 18},   {18, 17},   {18, 34},   {34, 18},
        {18, 19},   {19, 18},   {19, 35},   {35, 19},   {19, 20},   {20, 19},
        {20, 36},   {36, 20},   {20, 21},   {21, 20},   {21, 37},   {37, 21},
        {21, 22},   {22, 21},   {22, 38},   {38, 22},   {22, 23},   {23, 22},
        {23, 39},   {39, 23},   {23, 24},   {24, 23},   {24, 40},   {40, 24},
        {24, 25},   {25, 24},   {25, 41},   {41, 25},   {25, 26},   {26, 25},
        {26, 42},   {42, 26},   {26, 27},   {27, 26},   {27, 43},   {43, 27},
        {27, 28},   {28, 27},   {28, 44},   {44, 28},   {28, 29},   {29, 28},
        {29, 45},   {45, 29},   {29, 30},   {30, 29},   {30, 46},   {46, 30},
        {30, 31},   {31, 30},   {31, 47},   {47, 31},   {32, 48},   {48, 32},
        {32, 33},   {33, 32},   {33, 49},   {49, 33},   {33, 34},   {34, 33},
        {34, 50},   {50, 34},   {34, 35},   {35, 34},   {35, 51},   {51, 35},
        {35, 36},   {36, 35},   {36, 52},   {52, 36},   {36, 37},   {37, 36},
        {37, 53},   {53, 37},   {37, 38},   {38, 37},   {38, 54},   {54, 38},
        {38, 39},   {39, 38},   {39, 55},   {55, 39},   {39, 40},   {40, 39},
        {40, 56},   {56, 40},   {40, 41},   {41, 40},   {41, 57},   {57, 41},
        {41, 42},   {42, 41},   {42, 58},   {58, 42},   {42, 43},   {43, 42},
        {43, 59},   {59, 43},   {43, 44},   {44, 43},   {44, 60},   {60, 44},
        {44, 45},   {45, 44},   {45, 61},   {61, 45},   {45, 46},   {46, 45},
        {46, 62},   {62, 46},   {46, 47},   {47, 46},   {47, 63},   {63, 47},
        {48, 64},   {64, 48},   {48, 49},   {49, 48},   {49, 65},   {65, 49},
        {49, 50},   {50, 49},   {50, 66},   {66, 50},   {50, 51},   {51, 50},
        {51, 67},   {67, 51},   {51, 52},   {52, 51},   {52, 68},   {68, 52},
        {52, 53},   {53, 52},   {53, 69},   {69, 53},   {53, 54},   {54, 53},
        {54, 70},   {70, 54},   {54, 55},   {55, 54},   {55, 71},   {71, 55},
        {55, 56},   {56, 55},   {56, 72},   {72, 56},   {56, 57},   {57, 56},
        {57, 73},   {73, 57},   {57, 58},   {58, 57},   {58, 74},   {74, 58},
        {58, 59},   {59, 58},   {59, 75},   {75, 59},   {59, 60},   {60, 59},
        {60, 76},   {76, 60},   {60, 61},   {61, 60},   {61, 77},   {77, 61},
        {61, 62},   {62, 61},   {62, 78},   {78, 62},   {62, 63},   {63, 62},
        {63, 79},   {79, 63},   {64, 80},   {80, 64},   {64, 65},   {65, 64},
        {65, 81},   {81, 65},   {65, 66},   {66, 65},   {66, 82},   {82, 66},
        {66, 67},   {67, 66},   {67, 83},   {83, 67},   {67, 68},   {68, 67},
        {68, 84},   {84, 68},   {68, 69},   {69, 68},   {69, 85},   {85, 69},
        {69, 70},   {70, 69},   {70, 86},   {86, 70},   {70, 71},   {71, 70},
        {71, 87},   {87, 71},   {71, 72},   {72, 71},   {72, 88},   {88, 72},
        {72, 73},   {73, 72},   {73, 89},   {89, 73},   {73, 74},   {74, 73},
        {74, 90},   {90, 74},   {74, 75},   {75, 74},   {75, 91},   {91, 75},
        {75, 76},   {76, 75},   {76, 92},   {92, 76},   {76, 77},   {77, 76},
        {77, 93},   {93, 77},   {77, 78},   {78, 77},   {78, 94},   {94, 78},
        {78, 79},   {79, 78},   {79, 95},   {95, 79},   {80, 96},   {96, 80},
        {80, 81},   {81, 80},   {81, 97},   {97, 81},   {81, 82},   {82, 81},
        {82, 98},   {98, 82},   {82, 83},   {83, 82},   {83, 99},   {99, 83},
        {83, 84},   {84, 83},   {84, 100},  {100, 84},  {84, 85},   {85, 84},
        {85, 101},  {101, 85},  {85, 86},   {86, 85},   {86, 102},  {102, 86},
        {86, 87},   {87, 86},   {87, 103},  {103, 87},  {87, 88},   {88, 87},
        {88, 104},  {104, 88},  {88, 89},   {89, 88},   {89, 105},  {105, 89},
        {89, 90},   {90, 89},   {90, 106},  {106, 90},  {90, 91},   {91, 90},
        {91, 107},  {107, 91},  {91, 92},   {92, 91},   {92, 108},  {108, 92},
        {92, 93},   {93, 92},   {93, 109},  {109, 93},  {93, 94},   {94, 93},
        {94, 110},  {110, 94},  {94, 95},   {95, 94},   {95, 111},  {111, 95},
        {96, 112},  {112, 96},  {96, 97},   {97, 96},   {97, 113},  {113, 97},
        {97, 98},   {98, 97},   {98, 114},  {114, 98},  {98, 99},   {99, 98},
        {99, 115},  {115, 99},  {99, 100},  {100, 99},  {100, 116}, {116, 100},
        {100, 101}, {101, 100}, {101, 117}, {117, 101}, {101, 102}, {102, 101},
        {102, 118}, {118, 102}, {102, 103}, {103, 102}, {103, 119}, {119, 103},
        {103, 104}, {104, 103}, {104, 120}, {120, 104}, {104, 105}, {105, 104},
        {105, 121}, {121, 105}, {105, 106}, {106, 105}, {106, 122}, {122, 106},
        {106, 107}, {107, 106}, {107, 123}, {123, 107}, {107, 108}, {108, 107},
        {108, 124}, {124, 108}, {108, 109}, {109, 108}, {109, 125}, {125, 109},
        {109, 110}, {110, 109}, {110, 126}, {126, 110}, {110, 111}, {111, 110},
        {111, 127}, {127, 111}, {112, 128}, {128, 112}, {112, 113}, {113, 112},
        {113, 129}, {129, 113}, {113, 114}, {114, 113}, {114, 130}, {130, 114},
        {114, 115}, {115, 114}, {115, 131}, {131, 115}, {115, 116}, {116, 115},
        {116, 132}, {132, 116}, {116, 117}, {117, 116}, {117, 133}, {133, 117},
        {117, 118}, {118, 117}, {118, 134}, {134, 118}, {118, 119}, {119, 118},
        {119, 135}, {135, 119}, {119, 120}, {120, 119}, {120, 136}, {136, 120},
        {120, 121}, {121, 120}, {121, 137}, {137, 121}, {121, 122}, {122, 121},
        {122, 138}, {138, 122}, {122, 123}, {123, 122}, {123, 139}, {139, 123},
        {123, 124}, {124, 123}, {124, 140}, {140, 124}, {124, 125}, {125, 124},
        {125, 141}, {141, 125}, {125, 126}, {126, 125}, {126, 142}, {142, 126},
        {126, 127}, {127, 126}, {127, 143}, {143, 127}, {128, 144}, {144, 128},
        {128, 129}, {129, 128}, {129, 145}, {145, 129}, {129, 130}, {130, 129},
        {130, 146}, {146, 130}, {130, 131}, {131, 130}, {131, 147}, {147, 131},
        {131, 132}, {132, 131}, {132, 148}, {148, 132}, {132, 133}, {133, 132},
        {133, 149}, {149, 133}, {133, 134}, {134, 133}, {134, 150}, {150, 134},
        {134, 135}, {135, 134}, {135, 151}, {151, 135}, {135, 136}, {136, 135},
        {136, 152}, {152, 136}, {136, 137}, {137, 136}, {137, 153}, {153, 137},
        {137, 138}, {138, 137}, {138, 154}, {154, 138}, {138, 139}, {139, 138},
        {139, 155}, {155, 139}, {139, 140}, {140, 139}, {140, 156}, {156, 140},
        {140, 141}, {141, 140}, {141, 157}, {157, 141}, {141, 142}, {142, 141},
        {142, 158}, {158, 142}, {142, 143}, {143, 142}, {143, 159}, {159, 143},
        {144, 160}, {160, 144}, {144, 145}, {145, 144}, {145, 161}, {161, 145},
        {145, 146}, {146, 145}, {146, 162}, {162, 146}, {146, 147}, {147, 146},
        {147, 163}, {163, 147}, {147, 148}, {148, 147}, {148, 164}, {164, 148},
        {148, 149}, {149, 148}, {149, 165}, {165, 149}, {149, 150}, {150, 149},
        {150, 166}, {166, 150}, {150, 151}, {151, 150}, {151, 167}, {167, 151},
        {151, 152}, {152, 151}, {152, 168}, {168, 152}, {152, 153}, {153, 152},
        {153, 169}, {169, 153}, {153, 154}, {154, 153}, {154, 170}, {170, 154},
        {154, 155}, {155, 154}, {155, 171}, {171, 155}, {155, 156}, {156, 155},
        {156, 172}, {172, 156}, {156, 157}, {157, 156}, {157, 173}, {173, 157},
        {157, 158}, {158, 157}, {158, 174}, {174, 158}, {158, 159}, {159, 158},
        {159, 175}, {175, 159}, {160, 176}, {176, 160}, {160, 161}, {161, 160},
        {161, 177}, {177, 161}, {161, 162}, {162, 161}, {162, 178}, {178, 162},
        {162, 163}, {163, 162}, {163, 179}, {179, 163}, {163, 164}, {164, 163},
        {164, 180}, {180, 164}, {164, 165}, {165, 164}, {165, 181}, {181, 165},
        {165, 166}, {166, 165}, {166, 182}, {182, 166}, {166, 167}, {167, 166},
        {167, 183}, {183, 167}, {167, 168}, {168, 167}, {168, 184}, {184, 168},
        {168, 169}, {169, 168}, {169, 185}, {185, 169}, {169, 170}, {170, 169},
        {170, 186}, {186, 170}, {170, 171}, {171, 170}, {171, 187}, {187, 171},
        {171, 172}, {172, 171}, {172, 188}, {188, 172}, {172, 173}, {173, 172},
        {173, 189}, {189, 173}, {173, 174}, {174, 173}, {174, 190}, {190, 174},
        {174, 175}, {175, 174}, {175, 191}, {191, 175}, {176, 192}, {192, 176},
        {176, 177}, {177, 176}, {177, 193}, {193, 177}, {177, 178}, {178, 177},
        {178, 194}, {194, 178}, {178, 179}, {179, 178}, {179, 195}, {195, 179},
        {179, 180}, {180, 179}, {180, 196}, {196, 180}, {180, 181}, {181, 180},
        {181, 197}, {197, 181}, {181, 182}, {182, 181}, {182, 198}, {198, 182},
        {182, 183}, {183, 182}, {183, 199}, {199, 183}, {183, 184}, {184, 183},
        {184, 200}, {200, 184}, {184, 185}, {185, 184}, {185, 201}, {201, 185},
        {185, 186}, {186, 185}, {186, 202}, {202, 186}, {186, 187}, {187, 186},
        {187, 203}, {203, 187}, {187, 188}, {188, 187}, {188, 204}, {204, 188},
        {188, 189}, {189, 188}, {189, 205}, {205, 189}, {189, 190}, {190, 189},
        {190, 206}, {206, 190}, {190, 191}, {191, 190}, {191, 207}, {207, 191},
        {192, 208}, {208, 192}, {192, 193}, {193, 192}, {193, 209}, {209, 193},
        {193, 194}, {194, 193}, {194, 210}, {210, 194}, {194, 195}, {195, 194},
        {195, 211}, {211, 195}, {195, 196}, {196, 195}, {196, 212}, {212, 196},
        {196, 197}, {197, 196}, {197, 213}, {213, 197}, {197, 198}, {198, 197},
        {198, 214}, {214, 198}, {198, 199}, {199, 198}, {199, 215}, {215, 199},
        {199, 200}, {200, 199}, {200, 216}, {216, 200}, {200, 201}, {201, 200},
        {201, 217}, {217, 201}, {201, 202}, {202, 201}, {202, 218}, {218, 202},
        {202, 203}, {203, 202}, {203, 219}, {219, 203}, {203, 204}, {204, 203},
        {204, 220}, {220, 204}, {204, 205}, {205, 204}, {205, 221}, {221, 205},
        {205, 206}, {206, 205}, {206, 222}, {222, 206}, {206, 207}, {207, 206},
        {207, 223}, {223, 207}, {208, 224}, {224, 208}, {208, 209}, {209, 208},
        {209, 225}, {225, 209}, {209, 210}, {210, 209}, {210, 226}, {226, 210},
        {210, 211}, {211, 210}, {211, 227}, {227, 211}, {211, 212}, {212, 211},
        {212, 228}, {228, 212}, {212, 213}, {213, 212}, {213, 229}, {229, 213},
        {213, 214}, {214, 213}, {214, 230}, {230, 214}, {214, 215}, {215, 214},
        {215, 231}, {231, 215}, {215, 216}, {216, 215}, {216, 232}, {232, 216},
        {216, 217}, {217, 216}, {217, 233}, {233, 217}, {217, 218}, {218, 217},
        {218, 234}, {234, 218}, {218, 219}, {219, 218}, {219, 235}, {235, 219},
        {219, 220}, {220, 219}, {220, 236}, {236, 220}, {220, 221}, {221, 220},
        {221, 237}, {237, 221}, {221, 222}, {222, 221}, {222, 238}, {238, 222},
        {222, 223}, {223, 222}, {223, 239}, {239, 223}, {224, 240}, {240, 224},
        {224, 225}, {225, 224}, {225, 241}, {241, 225}, {225, 226}, {226, 225},
        {226, 242}, {242, 226}, {226, 227}, {227, 226}, {227, 243}, {243, 227},
        {227, 228}, {228, 227}, {228, 244}, {244, 228}, {228, 229}, {229, 228},
        {229, 245}, {245, 229}, {229, 230}, {230, 229}, {230, 246}, {246, 230},
        {230, 231}, {231, 230}, {231, 247}, {247, 231}, {231, 232}, {232, 231},
        {232, 248}, {248, 232}, {232, 233}, {233, 232}, {233, 249}, {249, 233},
        {233, 234}, {234, 233}, {234, 250}, {250, 234}, {234, 235}, {235, 234},
        {235, 251}, {251, 235}, {235, 236}, {236, 235}, {236, 252}, {252, 236},
        {236, 237}, {237, 236}, {237, 253}, {253, 237}, {237, 238}, {238, 237},
        {238, 254}, {254, 238}, {238, 239}, {239, 238}, {239, 255}, {255, 239},
        {240, 241}, {241, 240}, {241, 242}, {242, 241}, {242, 243}, {243, 242},
        {243, 244}, {244, 243}, {244, 245}, {245, 244}, {245, 246}, {246, 245},
        {246, 247}, {247, 246}, {247, 248}, {248, 247}, {248, 249}, {249, 248},
        {249, 250}, {250, 249}, {250, 251}, {251, 250}, {251, 252}, {252, 251},
        {252, 253}, {253, 252}, {253, 254}, {254, 253}, {254, 255}, {255, 254}};

    return std::make_unique<Architecture>("MQTGrid16", 256, COUPLING);
  }

  return nullptr;
}
}; // namespace mqt::ir::opt
