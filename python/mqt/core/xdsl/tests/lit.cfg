import lit.formats
import os
from pathlib import Path

config.name = "mqtcore"
config.test_format = lit.formats.ShTest()
config.suffixes = ['.mlir', '.py']

# Define test and execution roots
config.test_source_root = Path(__file__).parent

# Add tool substitutions (similar to how the main project does it)
tools = ["mqtcore-opt", "filecheck"]
tool_dirs = [os.environ.get("PATH", "").split(os.pathsep)]

# Manual tool substitutions since we don't have llvm_config here
config.substitutions.append(('mqtcore-opt', 'mqtcore-opt'))
config.substitutions.append(('filecheck', 'FileCheck'))

config.substitutions.append(('MQT_ROUNDTRIP', "mqtcore-opt %s --print-op-generic --split-input-file | mqtcore-opt --split-input-file | filecheck %s"))
